"use strict";(self.webpackChunkAngular_Base=self.webpackChunkAngular_Base||[]).push([[590],{9590:(k,u,o)=>{o.r(u),o.d(u,{FinancialReleaseModule:()=>V});var d=o(6814),S=o(6760),v=o(9284),C=o(5406);const g={browse:[{column:"type",title:"Tipo"},{column:"entity.name",title:"Fornecedor"},{column:"issuance_date",title:"Data de Emiss\xe3o",type:"date"},{column:"value",title:"Valor",type:"currency"}],installments:[{column:"item",title:"Parcela"},{column:"due_date",title:"Data de Vencimento",type:"date"},{column:"value",title:"Valor",type:"currency"}]};var e=o(4946);let h=(()=>{class t extends C.m{onCreate(){this.api="expense",this.columns=g}static \u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(t)))(i||t)}}();static \u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var R=o(2325),T=o(3209),l=o(95),B=o(4563),Z=o(1073);let p=(()=>{class t extends B._{get installments(){return this.form.get("financial_installments")}onCreate(){this.api="expense",this.form=this.formBuilder.group({id:[""],type:["debit"],issuance_date:[new Date],value:[0],entity:[],payment_form:[],payment_rule:[],financial_installments:this.formBuilder.array([])})}setData(n){this.form.patchValue({...n}),n.financial_installments.map(a=>{this.addInstallment(a)})}addInstallment(n){const a=n.item?n.item:Z.Z.maxId(this.installments.value,"item"),i=this.formBuilder.group({item:[a,[l.kI.required]],due_date:[n.due_date,[l.kI.required]],value:[n.value,[l.kI.required]]}),s=this.form.get("financial_installments");s&&s.push(i)}submit(){this.form.valid?super.save(this.form.value).subscribe(n=>console.log(n)):alert("Invalid Form")}static \u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(t)))(i||t)}}();static \u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var f=o(6288),J=o(6738),r=o(5645),w=o(2193);const b=[{value:"debit",description:"D\xe9bito"},{value:"credit",description:"Cr\xe9dito"}];var y=o(5061),I=o(7525),_=o(2568),F=o(6195),N=o(9181),Y=o(2904),A=o(5859);function Q(t,c){1&t&&e._UZ(0,"rca-entity-browse",7),2&t&&e.Q6J("config",c.$implicit)}function x(t,c){1&t&&e._UZ(0,"rca-entity-form",7),2&t&&e.Q6J("config",c.$implicit)}let M=(()=>{class t{entityBrowseService;financialReleaseService;paymentMethodBrowseService;paymentRuleBrowseService;config;releaseTypes=b;constructor(n,a,i,s){this.entityBrowseService=n,this.financialReleaseService=a,this.paymentMethodBrowseService=i,this.paymentRuleBrowseService=s}static \u0275fac=function(a){return new(a||t)(e.Y36(y.i),e.Y36(p),e.Y36(f.L),e.Y36(r.C))};static \u0275cmp=e.Xpm({type:t,selectors:[["rca-financial-release-step-0"]],inputs:{config:"config"},features:[e._Bn([r.C])],decls:9,vars:5,consts:[[3,"formGroup"],["label","Tipo","formControlName","type",3,"options"],["label","Data vencimento","formControlName","issuance_date",3,"readonly","autofocus"],["label","Valor","formControlName","value"],["label","Fornecedor","formControlName","entity","colDescription","name",1,"col-12",3,"service"],["searchTemplate",""],["formTemplate",""],[3,"config"]],template:function(a,i){1&a&&(e.TgZ(0,"form",0),e._UZ(1,"rca-dropdown",1)(2,"rca-edit-date",2)(3,"rca-edit-text",3),e.TgZ(4,"rca-auto-complete",4),e.YNc(5,Q,1,1,"ng-template",null,5,e.W1O),e.YNc(7,x,1,1,"ng-template",null,6,e.W1O),e.qZA()()),2&a&&(e.Q6J("formGroup",i.financialReleaseService.form),e.xp6(1),e.Q6J("options",i.releaseTypes),e.xp6(1),e.Q6J("readonly",!0)("autofocus",!0),e.xp6(2),e.Q6J("service",i.entityBrowseService))},dependencies:[I.V,_.F,F.j,N.t,l._Y,l.JJ,l.JL,l.sg,l.u,Y.a,A.c],encapsulation:2})}return t})();var U=o(965);function G(t,c){1&t&&e._UZ(0,"rca-payment-rule-browse",7),2&t&&e.Q6J("config",c.$implicit)}function D(t,c){1&t&&e._UZ(0,"rca-payment-rule-browse",7),2&t&&e.Q6J("config",c.$implicit)}let L=(()=>{class t{entityBrowseService;paymentRuleBrowseService;paymentMethodFormService;financialReleaseService;config;columnsInstallment=g;get form(){return this.financialReleaseService.form}constructor(n,a,i,s){this.entityBrowseService=n,this.paymentRuleBrowseService=a,this.paymentMethodFormService=i,this.financialReleaseService=s}handleGenerateInstallments(){const n=this.form.get("payment_rule")?.value;for(let a=0;a<n.installments;a++)this.financialReleaseService.addInstallment({due_date:new Date,value:100*a})}static \u0275fac=function(a){return new(a||t)(e.Y36(y.i),e.Y36(r.C),e.Y36(f.L),e.Y36(p))};static \u0275cmp=e.Xpm({type:t,selectors:[["rca-financial-release-step-1"]],inputs:{config:"config"},features:[e._Bn([r.C])],decls:11,vars:5,consts:[[1,"row",3,"formGroup"],["label","Forma de Pagamento","formControlName","payment_form","colDescription","description",1,"col-5",3,"browseService"],["searchTemplate",""],["label","Forma de Pagamento","formControlName","payment_rule","colDescription","description",1,"col-5",3,"service"],[1,"button","col-2","is-info","mt-5","is-small",3,"click"],[1,"row"],[1,"mt-2","col-12",3,"columns","data"],[3,"config"]],template:function(a,i){1&a&&(e.TgZ(0,"form",0)(1,"rca-auto-complete",1),e.YNc(2,G,1,1,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(4,"rca-auto-complete",3),e.YNc(5,D,1,1,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return i.handleGenerateInstallments()}),e._uU(8," Gerar Parcelas "),e.qZA()(),e.TgZ(9,"div",5),e._UZ(10,"rca-table",6),e.qZA()),2&a&&(e.Q6J("formGroup",i.financialReleaseService.form),e.xp6(1),e.Q6J("browseService",i.paymentMethodFormService),e.xp6(3),e.Q6J("service",i.paymentRuleBrowseService),e.xp6(6),e.Q6J("columns",i.columnsInstallment)("data",i.form.value.financial_installments))},dependencies:[F.j,l._Y,l.JJ,l.JL,l.sg,l.u,U.a],encapsulation:2})}return t})();function E(t,c){1&t&&e._UZ(0,"rca-financial-release-step-0")}function P(t,c){1&t&&e._UZ(0,"rca-financial-release-step-1")}function z(t,c){if(1&t){const n=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.handleClickPreviousStep())}),e._uU(1," Anterior "),e.qZA()}}function O(t,c){if(1&t){const n=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.handleClickNextStep())}),e._uU(1," Pr\xf3xima "),e.qZA()}}function W(t,c){if(1&t){const n=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.handleClickSave())}),e._uU(1," Gravar "),e.qZA()}}let m=(()=>{class t{financialReleaseService;config;step=0;constructor(n){this.financialReleaseService=n}handleClickPreviousStep(){this.step>0&&this.step--}handleClickNextStep(){this.step<1&&this.step++}handleClickSave(){this.financialReleaseService.submit()}static \u0275fac=function(a){return new(a||t)(e.Y36(p))};static \u0275cmp=e.Xpm({type:t,selectors:[["rca-financial-release-form"]],inputs:{config:"config"},features:[e._Bn([T.Z,p,f.L,J.O,r.C])],decls:9,vars:7,consts:[[3,"config","service"],[4,"ngIf"],[1,"flex"],["class","button col-2 is-info mt-5 is-small",3,"click",4,"ngIf"],[1,"button","col-2","is-info","mt-5","is-small",3,"click"]],template:function(a,i){1&a&&(e.TgZ(0,"rca-page-form",0)(1,"h1"),e._uU(2,"Lan\xe7amento de contas"),e.qZA(),e.YNc(3,E,1,0,"rca-financial-release-step-0",1),e.YNc(4,P,1,0,"rca-financial-release-step-1",1),e.TgZ(5,"div",2),e.YNc(6,z,2,0,"button",3),e.YNc(7,O,2,0,"button",3),e.YNc(8,W,2,0,"button",3),e.qZA()()),2&a&&(e.Q6J("config",i.config)("service",i.financialReleaseService),e.xp6(3),e.Q6J("ngIf",0==i.step),e.xp6(1),e.Q6J("ngIf",1==i.step),e.xp6(2),e.Q6J("ngIf",i.step>0),e.xp6(1),e.Q6J("ngIf",i.step<1),e.xp6(1),e.Q6J("ngIf",1==i.step))},dependencies:[d.O5,w.i,M,L],encapsulation:2})}return t})();function $(t,c){1&t&&e._UZ(0,"rca-financial-release-form",2),2&t&&e.Q6J("config",c.$implicit)}const j=[{path:"",component:(()=>{class t{financialReleaseBrowseService;config;constructor(n){this.financialReleaseBrowseService=n}static \u0275fac=function(a){return new(a||t)(e.Y36(h))};static \u0275cmp=e.Xpm({type:t,selectors:[["rca-financial-release-browse"]],inputs:{config:"config"},features:[e._Bn([h])],decls:3,vars:2,consts:[["title","Lan\xe7amento de Contas",3,"service","browseService"],["formTemplate",""],[3,"config"]],template:function(a,i){1&a&&(e.TgZ(0,"rca-page-browse",0),e.YNc(1,$,1,1,"ng-template",null,1,e.W1O),e.qZA()),2&a&&e.Q6J("service",i.financialReleaseBrowseService)("browseService",i.financialReleaseBrowseService)},dependencies:[R.P,m],encapsulation:2})}return t})(),pathMatch:"full"},{path:"new",component:m,pathMatch:"full"},{path:":id/view",component:m,pathMatch:"full"},{path:":id/edit",component:m,pathMatch:"full"},{path:":id/delete",component:m,pathMatch:"full"}];let X=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=e.oAB({type:t});static \u0275inj=e.cJS({imports:[v.Bz.forChild(j),v.Bz]})}return t})();var H=o(2313),K=o(6519);let V=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=e.oAB({type:t});static \u0275inj=e.cJS({imports:[d.ez,S.m,H.C,X,K.t]})}return t})()}}]);