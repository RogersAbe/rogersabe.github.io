"use strict";(self.webpackChunkAngular_Base=self.webpackChunkAngular_Base||[]).push([[937],{6325:(x,g,l)=>{l.r(g),l.d(g,{FinancialReleaseModule:()=>ie});var a=l(6814),u=l(6760),_=l(9284),d=l(5406);const T={browse:[{column:"type",title:"Tipo"},{column:"entity.name",title:"Fornecedor"},{column:"issuance_date",title:"Data de Emiss\xe3o",type:"date"},{column:"value",title:"Valor",type:"currency"}],installments:[{column:"item",title:"Parcela"},{column:"due_date",title:"Data de Vencimento",type:"date"},{column:"value",title:"Valor",type:"currency"}]};var e=l(4946);let F=(()=>{class t extends d.m{onCreate(){this.api="expense",this.columns=T}static \u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(t)))(i||t)}}();static \u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var s=l(2325),c=l(95),m=l(4563),v=l(1073),r=l(6676);let C=(()=>{class t extends m._{get installments(){return this.form.get("financial_installments")}clear(){this.api="expense",this.form=this.formBuilder.group({id:[""],type:["debit"],issuance_date:[new Date],value:[0],entity:[],payment_method:[],payment_rule:[],financial_installments:this.formBuilder.array([])})}onCreate(){this.clear()}setData(n){this.form.patchValue({...n}),n.financial_installments&&n.financial_installments.map(o=>{this.addInstallment(o)})}convertData(n){return{...n,issuance_date:r(n.issuance_date).format("yyyy-MM-DD"),created_at:r(n.created_at).format("yyyy-MM-DD"),updated_at:r(n.updated_at).format("yyyy-MM-DD")}}clearInstallments(){const n=this.form.get("financial_installments");n&&n.clear()}addInstallment(n){const o=n.item?n.item:v.Z.maxId(this.installments.value,"item"),i=this.formBuilder.group({item:[o,[c.kI.required]],due_date:[n.due_date,[c.kI.required]],value:[n.value,[c.kI.required]]}),p=this.form.get("financial_installments");p&&p.push(i)}submit(){this.form.valid?super.save(this.form.value).subscribe(n=>console.log(n)):alert("Invalid Form")}static \u0275fac=function(){let n;return function(i){return(n||(n=e.n5z(t)))(i||t)}}();static \u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var y=l(4254),D=l(6738),R=l(7641),J=l(2193),Z=l(2447);const w=[{value:"debit",description:"D\xe9bito"},{value:"credit",description:"Cr\xe9dito"}];var M=l(6754),A=l(7525),E=l(2568),B=l(6195),N=l(9181),Q=l(2904),Y=l(5859);let O=(()=>{class t{entityBrowseService;financialReleaseService;paymentMethodBrowseService;paymentRuleBrowseService;config;releaseTypes=w;constructor(n,o,i,p){this.entityBrowseService=n,this.financialReleaseService=o,this.paymentMethodBrowseService=i,this.paymentRuleBrowseService=p}static \u0275fac=function(o){return new(o||t)(e.Y36(M.i),e.Y36(C),e.Y36(y.L),e.Y36(R.C))};static \u0275cmp=e.Xpm({type:t,selectors:[["rca-financial-release-step-0"]],inputs:{config:"config"},features:[e._Bn([R.C])],decls:9,vars:7,consts:[[3,"formGroup"],["label","Tipo","formControlName","type",3,"options"],["label","Data vencimento","formControlName","issuance_date",3,"readonly","autofocus"],["label","Valor","formControlName","value"],["label","Fornecedor","formControlName","entity","colDescription","name",1,"col-12",3,"service"],[3,"modal"],["browse",""],["form",""]],template:function(o,i){1&o&&(e.TgZ(0,"form",0),e._UZ(1,"rca-dropdown",1)(2,"rca-edit-date",2)(3,"rca-edit-text",3),e.TgZ(4,"rca-auto-complete",4),e._UZ(5,"rca-entity-browse",5,6)(7,"rca-entity-form",5,7),e.qZA()()),2&o&&(e.Q6J("formGroup",i.financialReleaseService.form),e.xp6(1),e.Q6J("options",i.releaseTypes),e.xp6(1),e.Q6J("readonly",!0)("autofocus",!0),e.xp6(2),e.Q6J("service",i.entityBrowseService),e.xp6(1),e.Q6J("modal",!0),e.xp6(2),e.Q6J("modal",!0))},dependencies:[A.V,E.F,B.j,N.t,c._Y,c.JJ,c.JL,c.sg,c.u,Q.a,Y.c],encapsulation:2})}return t})();var P=l(5649),L=l(8326),U=l(4410),z=l(6879),V=l(7257),G=l(822);let j=(()=>{class t{entityBrowseService;paymentRuleBrowseService;paymentMethodFormService;financialReleaseService;alertService;config;columnsInstallment=T;get form_(){return this.financialReleaseService.form}constructor(n,o,i,p,I){this.entityBrowseService=n,this.paymentRuleBrowseService=o,this.paymentMethodFormService=i,this.financialReleaseService=p,this.alertService=I}handleGenerateInstallments(){this.financialReleaseService.clearInstallments();const n=this.form_.get("payment_rule")?.value;let o=this.financialReleaseService.form.value.value,i=+(o/n.installments).toFixed(2);for(let p=0;p<n.installments;p++){const I=p==n.installments-1;this.financialReleaseService.addInstallment({due_date:new Date,value:!I&&i<o?i:o}),o-=i}this.alertService.toastSuccess({message:"Parcelas geradas com sucesso."})}handleDeleteInstallments(){this.financialReleaseService.clearInstallments()}static \u0275fac=function(o){return new(o||t)(e.Y36(M.i),e.Y36(R.C),e.Y36(y.L),e.Y36(C),e.Y36(P.c))};static \u0275cmp=e.Xpm({type:t,selectors:[["rca-financial-release-step-1"]],inputs:{config:"config"},features:[e._Bn([R.C])],decls:15,vars:9,consts:[[1,"row",3,"formGroup"],["formGroup",""],["label","Forma de Pagamento","formControlName","payment_method","colDescription","description",1,"col-5",3,"service"],[3,"modal"],["browse",""],["form",""],["label","Forma de Pagamento","formControlName","payment_rule","colDescription","description",1,"col-5",3,"service"],["type","primary","iconLeft","add","label","Gerar Parcelas",3,"onClick"],[1,"row","mt-1"],[1,"col-12",3,"columns","data"]],template:function(o,i){1&o&&(e.TgZ(0,"form",0,1)(2,"rca-auto-complete",2),e._UZ(3,"rca-payment-method-browse",3,4)(5,"rca-payment-method-form",3,5),e.qZA(),e.TgZ(7,"rca-auto-complete",6),e._UZ(8,"rca-payment-rule-browse",3,4)(10,"rca-payment-rule-form",3,5),e.qZA(),e.TgZ(12,"rca-button",7),e.NdJ("onClick",function(){return i.handleGenerateInstallments()}),e.qZA()(),e.TgZ(13,"div",8),e._UZ(14,"rca-table",9),e.qZA()),2&o&&(e.Q6J("formGroup",i.financialReleaseService.form),e.xp6(2),e.Q6J("service",i.paymentMethodFormService),e.xp6(1),e.Q6J("modal",!0),e.xp6(2),e.Q6J("modal",!0),e.xp6(2),e.Q6J("service",i.paymentRuleBrowseService),e.xp6(1),e.Q6J("modal",!0),e.xp6(2),e.Q6J("modal",!0),e.xp6(4),e.Q6J("columns",i.columnsInstallment.installments)("data",i.form_.value.financial_installments))},dependencies:[Z.m,B.j,c._Y,c.JJ,c.JL,c.sg,c.u,L.a,U.b,z.Z,V.f,G.Q],encapsulation:2})}return t})();function K(t,h){1&t&&e._UZ(0,"rca-financial-release-step-0")}function W(t,h){1&t&&e._UZ(0,"rca-financial-release-step-1")}function X(t,h){if(1&t&&(e.YNc(0,K,1,0,"rca-financial-release-step-0",3),e.YNc(1,W,1,0,"rca-financial-release-step-1",3)),2&t){const n=e.oxw();e.Q6J("ngIf",0==n.step),e.xp6(1),e.Q6J("ngIf",1==n.step)}}function H(t,h){1&t&&e._UZ(0,"rca-button",9)}function $(t,h){if(1&t){const n=e.EpF();e.TgZ(0,"rca-button",10),e.NdJ("onClick",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.handleClickPreviousStep())}),e.qZA()}}function k(t,h){if(1&t){const n=e.EpF();e.TgZ(0,"rca-button",11),e.NdJ("onClick",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.handleClickNextStep())}),e.qZA()}}function q(t,h){if(1&t){const n=e.EpF();e.TgZ(0,"rca-button",12),e.NdJ("onClick",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.handleClickSave())}),e.qZA()}}function ee(t,h){if(1&t&&(e.TgZ(0,"div",4),e.YNc(1,H,1,0,"rca-button",5),e.YNc(2,$,1,0,"rca-button",6),e.YNc(3,k,1,0,"rca-button",7),e.YNc(4,q,1,0,"rca-button",8),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",0==n.step),e.xp6(1),e.Q6J("ngIf",n.step>0),e.xp6(1),e.Q6J("ngIf",n.step<1),e.xp6(1),e.Q6J("ngIf",1==n.step)}}let S=(()=>{class t extends J.i{aInjector;financialReleaseFormService;step=0;constructor(n,o){super(n),this.aInjector=n,this.financialReleaseFormService=o}handleClickPreviousStep(){this.step>0&&this.step--}handleClickNextStep(){this.step<1&&this.step++}handleClickSave(){this.financialReleaseFormService.submit()}static \u0275fac=function(o){return new(o||t)(e.Y36(e.zs3),e.Y36(C))};static \u0275cmp=e.Xpm({type:t,selectors:[["rca-financial-release-form"]],features:[e._Bn([C,y.L,D.O,R.C]),e.qOj],decls:5,vars:4,consts:[["title","Lan\xe7amento de Contas",3,"modal","size","service","form"],["body",""],["footer",""],[4,"ngIf"],[1,"flex","justify-space-between","mt-2",2,"flex","1"],["type","primary","iconLeft","chevron-back-outline","label","Voltar",4,"ngIf"],["type","primary","iconLeft","chevron-back-outline","label","Voltar",3,"onClick",4,"ngIf"],["type","primary","iconRight","chevron-forward-outline","label","Pr\xf3ximo",3,"onClick",4,"ngIf"],["type","success","iconLeft","save","label","Gravar",3,"onClick",4,"ngIf"],["type","primary","iconLeft","chevron-back-outline","label","Voltar"],["type","primary","iconLeft","chevron-back-outline","label","Voltar",3,"onClick"],["type","primary","iconRight","chevron-forward-outline","label","Pr\xf3ximo",3,"onClick"],["type","success","iconLeft","save","label","Gravar",3,"onClick"]],template:function(o,i){1&o&&(e.TgZ(0,"rca-page-form",0),e.YNc(1,X,2,2,"ng-template",null,1,e.W1O),e.YNc(3,ee,5,4,"ng-template",null,2,e.W1O),e.qZA()),2&o&&e.Q6J("modal",i.modal)("size",i.size)("service",i.financialReleaseFormService)("form",i.financialReleaseFormService.form)},dependencies:[a.O5,Z.m,J.i,O,j],encapsulation:2})}return t})();const te=[{path:"",component:(()=>{class t extends s.P{financialReleaseBrowseService;constructor(n,o){super(n),this.financialReleaseBrowseService=o}static \u0275fac=function(o){return new(o||t)(e.Y36(e.zs3),e.Y36(F))};static \u0275cmp=e.Xpm({type:t,selectors:[["rca-financial-release-browse"]],features:[e._Bn([F]),e.qOj],decls:3,vars:3,consts:[["title","Lan\xe7amento de Contas",3,"modal","service"],["size","large",3,"modal"],["form",""]],template:function(o,i){1&o&&(e.TgZ(0,"rca-page-browse",0),e._UZ(1,"rca-financial-release-form",1,2),e.qZA()),2&o&&(e.Q6J("modal",i.modal)("service",i.financialReleaseBrowseService),e.xp6(1),e.Q6J("modal",!0))},dependencies:[s.P,S],encapsulation:2})}return t})(),pathMatch:"full"},{path:"new",component:S,pathMatch:"full"},{path:":id/view",component:S,pathMatch:"full"},{path:":id/edit",component:S,pathMatch:"full"},{path:":id/delete",component:S,pathMatch:"full"}];let ne=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=e.oAB({type:t});static \u0275inj=e.cJS({imports:[_.Bz.forChild(te),_.Bz]})}return t})();var ae=l(2313),oe=l(6557),le=l(7855);let ie=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=e.oAB({type:t});static \u0275inj=e.cJS({imports:[a.ez,u.m,ae.C,le.u,oe.d,ne]})}return t})()},7396:(x,g,l)=>{l.d(g,{K:()=>b});var a=l(5406);const _={browse:[{column:"name",title:"Name"},{column:"companies.company_name",title:"Empresas"},{column:"profile",title:"Perfil"}]};var d=l(4946);let b=(()=>{class f extends a.m{onCreate(){this.api="user",this.columns=_}static \u0275fac=function(){let e;return function(s){return(e||(e=d.n5z(f)))(s||f)}}();static \u0275prov=d.Yz7({token:f,factory:f.\u0275fac,providedIn:"any"})}return f})()},9181:(x,g,l)=>{l.d(g,{t:()=>F});var a=l(4946),u=l(95),_=l(5261),d=l(6814),b=l(5537),f=l(8767);function T(s,c){if(1&s&&(a.TgZ(0,"option",5),a._uU(1),a.qZA()),2&s){const m=c.$implicit,v=a.oxw();a.Q6J("value",m[v.optionValue]),a.xp6(1),a.hij(" ",m[v.optionDescription]," ")}}function e(s,c){if(1&s&&(a.TgZ(0,"span",6),a._uU(1),a.qZA()),2&s){const m=a.oxw();a.xp6(1),a.hij(" ",m.errorMessage," ")}}let F=(()=>{class s extends _.C{options=[];optionValue="value";optionDescription="description";multiple=!1;onChangeValue(m){this.handleChange(m.target.value)}static \u0275fac=function(){let m;return function(r){return(m||(m=a.n5z(s)))(r||s)}}();static \u0275cmp=a.Xpm({type:s,selectors:[["rca-dropdown"]],inputs:{options:"options",optionValue:"optionValue",optionDescription:"optionDescription",multiple:"multiple"},features:[a._Bn([{provide:u.JU,useExisting:(0,a.Gpc)(()=>s),multi:!0}]),a.qOj],decls:10,vars:11,consts:[[1,"flex-column"],[1,"select","is-small",2,"width","100%",3,"ngClass"],[2,"width","100%",3,"id","ngModel","disable","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","has-text-danger",4,"ngIf"],[3,"value"],[1,"has-text-danger"]],template:function(v,r){1&v&&(a._uU(0),a.ALo(1,"pure"),a.TgZ(2,"div",0)(3,"label"),a._uU(4),a.qZA(),a.TgZ(5,"div")(6,"div",1)(7,"select",2),a.NdJ("ngModelChange",function(y){return r.value=y})("change",function(y){return r.onChangeValue(y)}),a.YNc(8,T,2,2,"option",3),a.qZA()()(),a.YNc(9,e,2,1,"span",4),a.qZA()),2&v&&(a.hij("",a.lcZ(1,9,r.logRender)," "),a.xp6(3),a.uIk("for",r.elementId),a.xp6(1),a.Oqu(r.label),a.xp6(2),a.Q6J("ngClass",r.className),a.xp6(1),a.Q6J("id",r.elementId)("ngModel",r.value)("disable",r.disable||r.owner&&r.owner.disable),a.xp6(1),a.Q6J("ngForOf",r.options),a.xp6(1),a.Q6J("ngIf",!r.valid&&r.errorMessage))},dependencies:[d.mk,d.sg,d.O5,u.YN,u.Kr,u.EJ,u.JJ,u.On,b.d,f.J],styles:["[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{cursor:not-allowed!important;border:1px solid #EEE!important;background:none}"]})}return s})()}}]);